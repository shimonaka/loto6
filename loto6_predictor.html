<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LOTO6 çµ±è¨ˆäºˆæƒ³ã‚·ã‚¹ãƒ†ãƒ </title>
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Noto+Sans+JP:wght@300;400;500;700&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --primary: #00ff88;
      --secondary: #00ccff;
      --bg-dark: #0a0a0f;
      --bg-card: #12121a;
      --text: #e8e8f0;
      --text-dim: #8888aa;
      --hot: #ff4466;
      --cold: #4488ff;
      --gold: #ffd700;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(ellipse at 20% 20%, rgba(0, 255, 136, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(0, 204, 255, 0.08) 0%, transparent 50%),
        linear-gradient(180deg, rgba(10, 10, 15, 1) 0%, rgba(18, 18, 26, 1) 100%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      padding: 40px 20px;
      position: relative;
    }

    header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary), transparent);
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 900;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 0.05em;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1rem;
      color: var(--text-dim);
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    .warning {
      background: linear-gradient(135deg, rgba(255, 68, 102, 0.1), rgba(255, 215, 0, 0.1));
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 12px;
      padding: 15px 20px;
      margin: 20px auto;
      max-width: 800px;
      font-size: 0.9rem;
      color: var(--gold);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    .card-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-title::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--primary);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.5;
        transform: scale(0.8);
      }
    }

    .number-grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 6px;
    }

    .number-cell {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .number-cell.hot {
      background: linear-gradient(135deg, rgba(255, 68, 102, 0.3), rgba(255, 68, 102, 0.1));
      border: 1px solid var(--hot);
      color: var(--hot);
    }

    .number-cell.warm {
      background: linear-gradient(135deg, rgba(255, 170, 102, 0.2), rgba(255, 170, 102, 0.1));
      border: 1px solid #ffaa66;
      color: #ffaa66;
    }

    .number-cell.neutral {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-dim);
    }

    .number-cell.cool {
      background: linear-gradient(135deg, rgba(102, 170, 255, 0.2), rgba(102, 170, 255, 0.1));
      border: 1px solid #66aaff;
      color: #66aaff;
    }

    .number-cell.cold {
      background: linear-gradient(135deg, rgba(68, 136, 255, 0.3), rgba(68, 136, 255, 0.1));
      border: 1px solid var(--cold);
      color: var(--cold);
    }

    .number-cell:hover {
      transform: scale(1.15);
      z-index: 10;
      box-shadow: 0 0 20px currentColor;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .stat-row:last-child {
      border-bottom: none;
    }

    .stat-label {
      color: var(--text-dim);
      font-size: 0.9rem;
    }

    .stat-value {
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      color: var(--primary);
    }

    .prediction-section {
      grid-column: 1 / -1;
    }

    .prediction-card {
      background: linear-gradient(135deg, var(--bg-card), rgba(0, 255, 136, 0.05));
      border: 2px solid rgba(0, 255, 136, 0.3);
    }

    .prediction-card::before {
      height: 4px;
      background: linear-gradient(90deg, var(--gold), var(--primary), var(--secondary));
    }

    .prediction-numbers {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin: 30px 0;
    }

    .pred-ball {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      font-weight: 900;
      background: linear-gradient(145deg, #2a2a3a, #1a1a2a);
      border: 3px solid var(--gold);
      color: var(--gold);
      box-shadow:
        0 0 20px rgba(255, 215, 0, 0.3),
        inset 0 -5px 15px rgba(0, 0, 0, 0.3),
        inset 0 5px 15px rgba(255, 255, 255, 0.1);
      animation: float 3s ease-in-out infinite;
    }

    .pred-ball:nth-child(1) {
      animation-delay: 0s;
    }

    .pred-ball:nth-child(2) {
      animation-delay: 0.2s;
    }

    .pred-ball:nth-child(3) {
      animation-delay: 0.4s;
    }

    .pred-ball:nth-child(4) {
      animation-delay: 0.6s;
    }

    .pred-ball:nth-child(5) {
      animation-delay: 0.8s;
    }

    .pred-ball:nth-child(6) {
      animation-delay: 1s;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    .btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      color: var(--bg-dark);
      cursor: pointer;
      transition: all 0.3s ease;
      display: block;
      margin: 20px auto;
    }

    .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
    }

    .method-select {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .method-btn {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 10px 20px;
      border-radius: 20px;
      color: var(--text-dim);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .method-btn.active {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 204, 255, 0.2));
      border-color: var(--primary);
      color: var(--primary);
    }

    .method-btn:hover {
      border-color: var(--secondary);
      color: var(--secondary);
    }

    .bar-chart {
      display: flex;
      align-items: flex-end;
      height: 150px;
      gap: 2px;
      margin-top: 20px;
    }

    .bar {
      flex: 1;
      background: linear-gradient(to top, var(--secondary), var(--primary));
      border-radius: 2px 2px 0 0;
      min-height: 5px;
      transition: all 0.5s ease;
      position: relative;
    }

    .bar:hover {
      opacity: 0.8;
    }

    .bar:hover::after {
      content: attr(data-count);
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      color: var(--primary);
      white-space: nowrap;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
    }

    .legend-color {
      width: 16px;
      height: 16px;
      border-radius: 4px;
    }

    .algorithm-info {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
      font-size: 0.85rem;
      color: var(--text-dim);
      line-height: 1.6;
    }

    .algorithm-info h4 {
      color: var(--secondary);
      margin-bottom: 10px;
      font-family: 'Orbitron', sans-serif;
    }

    .tooltip {
      position: absolute;
      background: var(--bg-dark);
      border: 1px solid var(--primary);
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.75rem;
      white-space: nowrap;
      z-index: 100;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .recent-results {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 300px;
      overflow-y: auto;
    }

    .recent-row {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
    }

    .recent-date {
      font-size: 0.75rem;
      color: var(--text-dim);
      min-width: 90px;
    }

    .recent-numbers {
      display: flex;
      gap: 5px;
    }

    .mini-ball {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 700;
      background: linear-gradient(135deg, #2a2a3a, #1a1a2a);
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .confidence {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 15px;
      justify-content: center;
    }

    .confidence-bar {
      width: 200px;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
    }

    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--cold), var(--primary), var(--hot));
      transition: width 0.5s ease;
    }

    .confidence-text {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
    }

    footer {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-dim);
      font-size: 0.8rem;
    }

    @media (max-width: 768px) {
      .number-grid {
        grid-template-columns: repeat(7, 1fr);
      }

      .pred-ball {
        width: 55px;
        height: 55px;
        font-size: 1.2rem;
      }

      .prediction-numbers {
        gap: 10px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>LOTO6 PREDICTOR</h1>
      <p class="subtitle">è¤‡åˆçµ±è¨ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ äºˆæƒ³ã‚·ã‚¹ãƒ†ãƒ </p>
    </header>

    <div class="warning">
      âš ï¸ é‡è¦ï¼šæœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯çµ±è¨ˆåˆ†æã«åŸºã¥ãå‚è€ƒæƒ…å ±ã§ã‚ã‚Šã€å½“é¸ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ­ãƒˆ6ã¯å®Œå…¨ãªãƒ©ãƒ³ãƒ€ãƒ æŠ½é¸ã§ã‚ã‚Šã€éå»ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å°†æ¥ã®çµæœã‚’äºˆæ¸¬ã™ã‚‹ã“ã¨ã¯æ•°å­¦çš„ã«ä¸å¯èƒ½ã§ã™ã€‚å®ãã˜ã¯è¨ˆç”»çš„ã«æ¥½ã—ã¿ã¾ã—ã‚‡ã†ã€‚
    </div>

    <div class="grid">
      <!-- å‡ºç¾é »åº¦ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— -->
      <div class="card">
        <div class="card-title">å‡ºç¾é »åº¦ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</div>
        <div class="number-grid" id="frequencyGrid"></div>
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color" style="background: var(--hot)"></div>
            <span>ãƒ›ãƒƒãƒˆï¼ˆé«˜é »åº¦ï¼‰</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: var(--cold)"></div>
            <span>ã‚³ãƒ¼ãƒ«ãƒ‰ï¼ˆä½é »åº¦ï¼‰</span>
          </div>
        </div>
      </div>

      <!-- çµ±è¨ˆæƒ…å ± -->
      <div class="card">
        <div class="card-title">çµ±è¨ˆã‚µãƒãƒªãƒ¼</div>
        <div class="stat-row">
          <span class="stat-label">æœ€æ–°ãƒ‡ãƒ¼ã‚¿æ—¥</span>
          <span class="stat-value" id="lastUpdateDate">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">åˆ†æå›æ•°</span>
          <span class="stat-value" id="totalDraws">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">æœ€é »å‡ºæ•°å­—</span>
          <span class="stat-value" id="mostFrequent">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">æœ€ä½å‡ºç¾æ•°å­—</span>
          <span class="stat-value" id="leastFrequent">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">å¹³å‡å¥‡æ•°/å¶æ•°æ¯”</span>
          <span class="stat-value" id="oddEvenRatio">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">å¹³å‡åˆè¨ˆå€¤</span>
          <span class="stat-value" id="avgSum">-</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">é€£ç•ªå‡ºç¾ç‡</span>
          <span class="stat-value" id="consecutiveRate">-</span>
        </div>
      </div>

      <!-- å‡ºç¾é–“éš”åˆ†æ -->
      <div class="card">
        <div class="card-title">å‡ºç¾é–“éš”åˆ†æï¼ˆæœªå‡ºç¾å›æ•°ï¼‰</div>
        <div class="bar-chart" id="gapChart"></div>
        <p style="text-align: center; font-size: 0.75rem; color: var(--text-dim); margin-top: 10px;">
          å„æ•°å­—ãŒæœ€å¾Œã«å‡ºç¾ã—ã¦ã‹ã‚‰ã®å›æ•°ï¼ˆé•·ã„ã»ã©ã€Œå‡ºã‚„ã™ã„ã€å¯èƒ½æ€§ï¼‰
        </p>
      </div>

      <!-- æœ€è¿‘ã®æŠ½é¸çµæœ -->
      <div class="card">
        <div class="card-title">ç›´è¿‘ã®æŠ½é¸çµæœ</div>
        <div class="recent-results" id="recentResults"></div>
      </div>

      <!-- äºˆæƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="card prediction-card prediction-section">
        <div class="card-title" style="color: var(--gold);">ğŸ¯ äºˆæƒ³ç•ªå·ç”Ÿæˆ</div>

        <div class="method-select" id="methodSelect">
          <button class="method-btn active" data-method="hybrid">ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ³•</button>
          <button class="method-btn" data-method="hot">ãƒ›ãƒƒãƒˆãƒŠãƒ³ãƒãƒ¼æ³•</button>
          <button class="method-btn" data-method="cold">ã‚³ãƒ¼ãƒ«ãƒ‰ãƒŠãƒ³ãƒãƒ¼æ³•</button>
          <button class="method-btn" data-method="balanced">ãƒãƒ©ãƒ³ã‚¹æ³•</button>
          <button class="method-btn" data-method="gap">å‡ºç¾é–“éš”æ³•</button>
          <button class="method-btn" data-method="pattern">ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†ææ³•</button>
        </div>

        <div class="prediction-numbers" id="predictionNumbers">
          <div class="pred-ball">?</div>
          <div class="pred-ball">?</div>
          <div class="pred-ball">?</div>
          <div class="pred-ball">?</div>
          <div class="pred-ball">?</div>
          <div class="pred-ball">?</div>
        </div>

        <div class="confidence">
          <span class="confidence-text">çµ±è¨ˆçš„ä¿¡é ¼åº¦:</span>
          <div class="confidence-bar">
            <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
          </div>
          <span class="confidence-text" id="confidenceValue">--%</span>
        </div>

        <button class="btn" onclick="generatePrediction()">äºˆæƒ³ã‚’ç”Ÿæˆ</button>

        <div class="algorithm-info" id="algorithmInfo">
          <h4>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ èª¬æ˜</h4>
          <p>äºˆæƒ³æ–¹æ³•ã‚’é¸æŠã—ã¦ã€Œäºˆæƒ³ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
        </div>
      </div>
    </div>

    <footer>
      <p>LOTO6 PREDICTOR v1.0 | çµ±è¨ˆåˆ†æã‚·ã‚¹ãƒ†ãƒ </p>
      <p style="margin-top: 10px;">æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯å¨¯æ¥½ç›®çš„ã§ã™ã€‚å®ãã˜ã¯20æ­³ä»¥ä¸Šã‹ã‚‰ã€‚</p>
    </footer>
  </div>

  <script src="loto6_data.js"></script>
  <script>
    // éå»ã®æŠ½é¸ãƒ‡ãƒ¼ã‚¿ï¼ˆ2024-2025å¹´ï¼‰
    // External Data Source
    // const historicalData = [...]; REPLACED
    var historicalData = [];
    if (typeof LOTO6_DATA === 'undefined') {
        alert('loto6_data.jsãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚update_loto6.pyã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
        historicalData = [];
    } else {
        historicalData = LOTO6_DATA;
    }

    // çµ±è¨ˆè¨ˆç®—
    let frequency = {};
    let gaps = {};
    let stats = {};

    function initializeStats() {
      // å‡ºç¾é »åº¦ã‚’åˆæœŸåŒ–
      for (let i = 1; i <= 43; i++) {
        frequency[i] = 0;
        gaps[i] = historicalData.length; // æœ€å¤§é–“éš”ã§åˆæœŸåŒ–
      }

      // å‡ºç¾é »åº¦ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
      historicalData.forEach((draw, index) => {
        draw.numbers.forEach(num => {
          frequency[num]++;
          if (gaps[num] === historicalData.length) {
            gaps[num] = index;
          }
        });
      });

      // æœ€æ–°ã®å‡ºç¾é–“éš”ã‚’è¨ˆç®—
      for (let i = 1; i <= 43; i++) {
        let found = false;
        for (let j = 0; j < historicalData.length; j++) {
          if (historicalData[j].numbers.includes(i)) {
            gaps[i] = j;
            found = true;
            break;
          }
        }
        if (!found) gaps[i] = historicalData.length;
      }

      // çµ±è¨ˆã‚µãƒãƒªãƒ¼è¨ˆç®—
      const frequencies = Object.entries(frequency).sort((a, b) => b[1] - a[1]);
      stats.mostFrequent = frequencies.slice(0, 3).map(f => f[0]).join(', ');
      stats.leastFrequent = frequencies.slice(-3).map(f => f[0]).join(', ');
      stats.totalDraws = historicalData.length;

      // Update Date
      if (historicalData.length > 0) {
        document.getElementById('lastUpdateDate').textContent = historicalData[0].date;
      }

      // å¥‡æ•°å¶æ•°æ¯”è¨ˆç®—
      let oddTotal = 0, evenTotal = 0;
      historicalData.forEach(draw => {
        draw.numbers.forEach(num => {
          if (num % 2 === 0) evenTotal++;
          else oddTotal++;
        });
      });
      stats.oddEvenRatio = `${(oddTotal / historicalData.length / 6 * 100).toFixed(0)}% / ${(evenTotal / historicalData.length / 6 * 100).toFixed(0)}%`;

      // å¹³å‡åˆè¨ˆå€¤
      const sums = historicalData.map(d => d.numbers.reduce((a, b) => a + b, 0));
      stats.avgSum = (sums.reduce((a, b) => a + b, 0) / sums.length).toFixed(1);

      // é€£ç•ªå‡ºç¾ç‡
      let consecutiveCount = 0;
      historicalData.forEach(draw => {
        const sorted = [...draw.numbers].sort((a, b) => a - b);
        for (let i = 0; i < sorted.length - 1; i++) {
          if (sorted[i + 1] - sorted[i] === 1) {
            consecutiveCount++;
            break;
          }
        }
      });
      stats.consecutiveRate = `${(consecutiveCount / historicalData.length * 100).toFixed(0)}%`;
    }

    function renderFrequencyGrid() {
      const grid = document.getElementById('frequencyGrid');
      const maxFreq = Math.max(...Object.values(frequency));
      const minFreq = Math.min(...Object.values(frequency));
      const range = maxFreq - minFreq;

      grid.innerHTML = '';
      for (let i = 1; i <= 43; i++) {
        const cell = document.createElement('div');
        cell.className = 'number-cell';
        cell.textContent = i;

        const normalized = (frequency[i] - minFreq) / range;
        if (normalized > 0.8) cell.classList.add('hot');
        else if (normalized > 0.6) cell.classList.add('warm');
        else if (normalized > 0.4) cell.classList.add('neutral');
        else if (normalized > 0.2) cell.classList.add('cool');
        else cell.classList.add('cold');

        cell.title = `${i}: ${frequency[i]}å›å‡ºç¾`;
        grid.appendChild(cell);
      }
    }

    function renderStats() {
      document.getElementById('totalDraws').textContent = stats.totalDraws + 'å›';
      document.getElementById('mostFrequent').textContent = stats.mostFrequent;
      document.getElementById('leastFrequent').textContent = stats.leastFrequent;
      document.getElementById('oddEvenRatio').textContent = stats.oddEvenRatio;
      document.getElementById('avgSum').textContent = stats.avgSum;
      document.getElementById('consecutiveRate').textContent = stats.consecutiveRate;
    }

    function renderGapChart() {
      const chart = document.getElementById('gapChart');
      const maxGap = Math.max(...Object.values(gaps));

      chart.innerHTML = '';
      for (let i = 1; i <= 43; i++) {
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.height = `${(gaps[i] / maxGap) * 100}%`;
        bar.setAttribute('data-count', `${i}: ${gaps[i]}å›`);
        chart.appendChild(bar);
      }
    }

    function renderRecentResults() {
      const container = document.getElementById('recentResults');
      container.innerHTML = '';

      historicalData.slice(0, 10).forEach(draw => {
        const row = document.createElement('div');
        row.className = 'recent-row';

        const date = document.createElement('span');
        date.className = 'recent-date';
        date.textContent = draw.date;
        row.appendChild(date);

        const numbers = document.createElement('div');
        numbers.className = 'recent-numbers';
        draw.numbers.forEach(num => {
          const ball = document.createElement('span');
          ball.className = 'mini-ball';
          ball.textContent = num;
          numbers.appendChild(ball);
        });
        row.appendChild(numbers);

        container.appendChild(row);
      });
    }

    // äºˆæƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
    const algorithms = {
      hybrid: {
        name: 'ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ³•',
        description: 'è¤‡æ•°ã®çµ±è¨ˆæŒ‡æ¨™ã‚’çµ„ã¿åˆã‚ã›ãŸç·åˆçš„ãªäºˆæƒ³æ–¹æ³•ã€‚å‡ºç¾é »åº¦ã€å‡ºç¾é–“éš”ã€å¥‡å¶ãƒãƒ©ãƒ³ã‚¹ã€é«˜ä½ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã—ã¦ã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã€æœ€é©ãªçµ„ã¿åˆã‚ã›ã‚’é¸å‡ºã—ã¾ã™ã€‚',
        confidence: 65,
        generate: () => {
          const scores = {};
          for (let i = 1; i <= 43; i++) {
            const freqScore = frequency[i] / Math.max(...Object.values(frequency)) * 30;
            const gapScore = gaps[i] / Math.max(...Object.values(gaps)) * 40;
            const randomBoost = Math.random() * 30;
            scores[i] = freqScore + gapScore + randomBoost;
          }

          // å¥‡å¶ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®
          const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
          const selected = [];
          let oddCount = 0, evenCount = 0;

          for (const [num] of sorted) {
            const n = parseInt(num);
            if (selected.length >= 6) break;

            if (n % 2 === 0 && evenCount < 4) {
              selected.push(n);
              evenCount++;
            } else if (n % 2 !== 0 && oddCount < 4) {
              selected.push(n);
              oddCount++;
            } else if (selected.length < 6) {
              selected.push(n);
              if (n % 2 === 0) evenCount++;
              else oddCount++;
            }
          }

          return selected.sort((a, b) => a - b);
        }
      },

      hot: {
        name: 'ãƒ›ãƒƒãƒˆãƒŠãƒ³ãƒãƒ¼æ³•',
        description: 'æœ€è¿‘ã‚ˆãå‡ºç¾ã—ã¦ã„ã‚‹ã€Œç†±ã„ã€æ•°å­—ã‚’å„ªå…ˆçš„ã«é¸å‡ºã€‚å‡ºç¾é »åº¦ã®ä¸Šä½ã‹ã‚‰é¸ã³ã¤ã¤ã€è‹¥å¹²ã®ãƒ©ãƒ³ãƒ€ãƒ æ€§ã‚’åŠ ãˆã¦å¤šæ§˜æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚',
        confidence: 55,
        generate: () => {
          const sorted = Object.entries(frequency).sort((a, b) => b[1] - a[1]);
          const top15 = sorted.slice(0, 15).map(x => parseInt(x[0]));
          const selected = [];

          while (selected.length < 6) {
            const idx = Math.floor(Math.random() * Math.min(10, top15.length));
            const num = top15[idx];
            if (!selected.includes(num)) {
              selected.push(num);
            }
          }

          return selected.sort((a, b) => a - b);
        }
      },

      cold: {
        name: 'ã‚³ãƒ¼ãƒ«ãƒ‰ãƒŠãƒ³ãƒãƒ¼æ³•',
        description: 'é•·æœŸé–“å‡ºç¾ã—ã¦ã„ãªã„ã€Œå†·ãŸã„ã€æ•°å­—ã«æ³¨ç›®ã€‚çµ±è¨ˆçš„å›å¸°ã®æ³•å‰‡ã«ã‚ˆã‚Šã€å‡ºç¾ãŒå°‘ãªã„æ•°å­—ã¯ä»Šå¾Œå‡ºã‚„ã™ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã„ã†è€ƒãˆæ–¹ã«åŸºã¥ãã¾ã™ã€‚',
        confidence: 50,
        generate: () => {
          const sorted = Object.entries(frequency).sort((a, b) => a[1] - b[1]);
          const bottom15 = sorted.slice(0, 15).map(x => parseInt(x[0]));
          const selected = [];

          while (selected.length < 6) {
            const idx = Math.floor(Math.random() * Math.min(10, bottom15.length));
            const num = bottom15[idx];
            if (!selected.includes(num)) {
              selected.push(num);
            }
          }

          return selected.sort((a, b) => a - b);
        }
      },

      balanced: {
        name: 'ãƒãƒ©ãƒ³ã‚¹æ³•',
        description: 'é«˜ä½ãƒãƒ©ãƒ³ã‚¹ï¼ˆ1-21 vs 22-43ï¼‰ã¨å¥‡å¶ãƒãƒ©ãƒ³ã‚¹ã‚’æœ€é©åŒ–ã€‚éå»ã®å½“é¸ç•ªå·ã®åˆ†å¸ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆã‚ã›ã¦ã€å‡ç­‰ãªçµ„ã¿åˆã‚ã›ã‚’ç”Ÿæˆã—ã¾ã™ã€‚',
        confidence: 60,
        generate: () => {
          const low = [], high = [];
          for (let i = 1; i <= 21; i++) low.push(i);
          for (let i = 22; i <= 43; i++) high.push(i);

          const selected = [];
          // 3ã¤ã¯ä½ã„æ•°å­—ã€3ã¤ã¯é«˜ã„æ•°å­—
          while (selected.length < 3) {
            const num = low[Math.floor(Math.random() * low.length)];
            if (!selected.includes(num)) selected.push(num);
          }
          while (selected.length < 6) {
            const num = high[Math.floor(Math.random() * high.length)];
            if (!selected.includes(num)) selected.push(num);
          }

          return selected.sort((a, b) => a - b);
        }
      },

      gap: {
        name: 'å‡ºç¾é–“éš”æ³•',
        description: 'å„æ•°å­—ã®å‡ºç¾é–“éš”ï¼ˆä½•å›å‰ã«å‡ºãŸã‹ï¼‰ã‚’åˆ†æã—ã€å‡ºç¾é–“éš”ãŒé•·ã„æ•°å­—ã‚’å„ªå…ˆã€‚ã€Œãã‚ãã‚å‡ºã‚‹ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ç‹™ã†æ–¹æ³•ã§ã™ã€‚',
        confidence: 52,
        generate: () => {
          const sorted = Object.entries(gaps).sort((a, b) => b[1] - a[1]);
          const longGap = sorted.slice(0, 20).map(x => parseInt(x[0]));
          const selected = [];

          while (selected.length < 6) {
            const idx = Math.floor(Math.random() * Math.min(15, longGap.length));
            const num = longGap[idx];
            if (!selected.includes(num)) {
              selected.push(num);
            }
          }

          return selected.sort((a, b) => a - b);
        }
      },

      pattern: {
        name: 'ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†ææ³•',
        description: 'éå»ã®å½“é¸ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé€£ç•ªã®æœ‰ç„¡ã€æ•°å­—ã®é–“éš”ã€æœ«å°¾æ•°å­—ã®åˆ†å¸ƒãªã©ï¼‰ã‚’åˆ†æã—ã€ã‚ˆãå‡ºç¾ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆè‡´ã™ã‚‹çµ„ã¿åˆã‚ã›ã‚’ç”Ÿæˆã—ã¾ã™ã€‚',
        confidence: 58,
        generate: () => {
          const selected = [];

          // 1-10ã‹ã‚‰1ã¤
          selected.push(Math.floor(Math.random() * 10) + 1);

          // 11-20ã‹ã‚‰1ã¤
          let num;
          do {
            num = Math.floor(Math.random() * 10) + 11;
          } while (selected.includes(num));
          selected.push(num);

          // 21-30ã‹ã‚‰1ã¤
          do {
            num = Math.floor(Math.random() * 10) + 21;
          } while (selected.includes(num));
          selected.push(num);

          // 31-43ã‹ã‚‰2ã¤
          for (let i = 0; i < 2; i++) {
            do {
              num = Math.floor(Math.random() * 13) + 31;
            } while (selected.includes(num));
            selected.push(num);
          }

          // 1ã¤ã¯é »åº¦é«˜ã„æ•°å­—ã‹ã‚‰
          const sorted = Object.entries(frequency).sort((a, b) => b[1] - a[1]);
          for (const [n] of sorted) {
            const parsed = parseInt(n);
            if (!selected.includes(parsed)) {
              selected.push(parsed);
              break;
            }
          }

          return selected.slice(0, 6).sort((a, b) => a - b);
        }
      }
    };

    let currentMethod = 'hybrid';

    function setupMethodButtons() {
      const buttons = document.querySelectorAll('.method-btn');
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentMethod = btn.dataset.method;
          updateAlgorithmInfo();
        });
      });
    }

    function updateAlgorithmInfo() {
      const info = document.getElementById('algorithmInfo');
      const algo = algorithms[currentMethod];
      info.innerHTML = `
        <h4>${algo.name}</h4>
        <p>${algo.description}</p>
      `;
    }

    function generatePrediction() {
      const algo = algorithms[currentMethod];
      const numbers = algo.generate();

      const balls = document.querySelectorAll('.pred-ball');
      balls.forEach((ball, i) => {
        ball.style.animation = 'none';
        ball.offsetHeight; // Trigger reflow
        ball.style.animation = `float 3s ease-in-out infinite ${i * 0.2}s`;

        setTimeout(() => {
          ball.textContent = numbers[i] || '?';
        }, i * 100);
      });

      // ä¿¡é ¼åº¦æ›´æ–°
      const confidence = algo.confidence + Math.floor(Math.random() * 10) - 5;
      document.getElementById('confidenceFill').style.width = `${confidence}%`;
      document.getElementById('confidenceValue').textContent = `${confidence}%`;
    }

    // åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', () => {
      initializeStats();
      renderFrequencyGrid();
      renderStats();
      renderGapChart();
      renderRecentResults();
      setupMethodButtons();
      updateAlgorithmInfo();
    });
  </script>
</body>

</html>